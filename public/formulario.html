<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" />
    <link rel="shortcut icon" href="./assets/icones/favIcon.ico" type="image/x-icon">
    <link rel="stylesheet" href="./css/formulario.css">

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <title>O Rappa | Formulário</title>
</head>

<body>
    <main>
        <nav class="main-menu">
            <img class="logo" src="./assets/imgs/ORaioRappa.png" />
            <ul>
                <li class="nav-item">
                    <b></b>
                    <b></b>
                    <a href="./dashboard.html">
                        <i class="fa fa-house nav-icon"></i>
                        <span class="nav-text">Dashboard</span>
                    </a>
                </li>

                <li class="nav-item">
                    <b></b>
                    <b></b>
                    <a href="./quiz.html">
                        <i class="fa fa-user nav-icon"></i>
                        <span class="nav-text">Quiz</span>
                    </a>
                </li>

                <li class="nav-item active">
                    <b></b>
                    <b></b>
                    <a href="./formulario.html">
                        <i class="fa fa-calendar-check nav-icon"></i>
                        <span class="nav-text">Formulário</span>
                    </a>
                </li>
                <li class="nav-item">
                    <b></b>
                    <b></b>
                    <a href="./index.html">
                        <i class="fa fa-sliders nav-icon"></i>
                        <span class="nav-text">Sair</span>
                    </a>
                </li>

            </ul>
        </nav>
        <section class="content">
            <div class="left-content">
                <div class="conteudoFormulario">
                    <h1>Formulário - O Rappa</h1><br>
                    <section class="sexo">
                        <h3>Selecione seu sexo:</h3>
                        <input type="radio" id="duvida1a" class="btn1" name="duvida1" value="F">
                        <label class="duvida11" for="duvida1a">Feminino</label><br>
                        <input type="radio" id="duvida1b" class="btn2" name="duvida1" value="M">
                        <label class="duvida12" for="duvida1b">Masculino</label><br><br>

                    </section>

                    <section class="album">
                        <h3>Qual seu álbum favorito?</h3>
                        <input type="radio" id="duvida2a" class="btn1.2" name="duvida2" value="1">
                        <label class="duvida21" for="duvida2a">O Rappa</label><br>
                        <input type="radio" id="duvida2b" class="btn2.2" name="duvida2" value="2">
                        <label class="duvida22" for="duvida2b">Rappa Mundi</label><br>
                        <input type="radio" id="duvida2c" class="btn3.2" name="duvida2" value="3">
                        <label class="duvida23" for="duvida2c">Lado B Lado A</label><br>
                        <input type="radio" id="duvida2d" class="btn4.2" name="duvida2" value="4">
                        <label class="duvida24" for="duvida2d">O Silêncio Q Precede O Esporro</label><br>
                        <input type="radio" id="duvida2e" class="btn5.2" name="duvida2" value="5">
                        <label class="duvida25" for="duvida2e">7 Vezes</label><br>
                        <input type="radio" id="duvida2f" class="btn6.2" name="duvida2" value="6">
                        <label class="duvida26" for="duvida2e">Nunca Tem Fim...</label><br>
                        <input type="radio" id="duvida2f" class="btn6.2" name="duvida2" value="7">
                        <label class="duvida26" for="duvida2e">Não Possuo</label><br><br>

                            <!-- Como o gráfico de vot -->
                        <section class="comoConheceu">
                            <h3>Como conheceu a banda O Rappa?</h3>
                            <input type="radio" id="duvida3a" class="btn1.3" name="duvida3" value="2">
                            <label class="duvida31" for="duvida3a">Família e amigos</label><br>
                            <input type="radio" id="duvida3b" class="btn2.3" name="duvida3" value="2">
                            <label class="duvida32" for="duvida3b">Instagram, TikTok, Youtube, etc.</label><br>
                            <input type="radio" id="duvida3c" class="btn3.3" name="duvida3" value="2">
                            <label class="duvida33" for="duvida3c">Jornal ou Revista</label><br>
                            <input type="radio" id="duvida3d" class="btn4.3" name="duvida3" value="4">
                            <label class="duvida34" for="duvida3d">Outro</label><br><br>
                        </section>

                        <section class="botao">
                            <button onclick="enviarInformacoes()">Salvar</button>
                        </section>
                </div>
                <div class="imagemFormulario">
                    <div id="show"></div>
                </div>
            </div>
        </section>
    </main>
</body>

<script>


    const navItems = document.querySelectorAll(".nav-item");

    navItems.forEach((navItem, i) => {
        navItem.addEventListener("click", () => {
            navItems.forEach((item, j) => {
                item.className = "nav-item";
            });
            navItem.className = "nav-item active";
        });
    });

    // 

    function enviarInformacoes() {
        const sexoUsuario = document.querySelector('input[name="duvida1"]:checked').value;

        fetch("/formulario/enviarSexo", {
            method: "POST",
            headers: {
                "Content-Type": "application/json",
            },
            body: JSON.stringify({
                usuarioServer: sessionStorage.ID_USUARIO,
                sexoServer: sexoUsuario
            }),
        })
            .then(function (resposta) {
                console.log("resposta: ", resposta);
            })
            .catch(function (resposta) {
                console.log(`#ERRO: ${resposta}`);
            });
            enviarInfAlbum()
    }



    function enviarInfAlbum() {
        const albumUsuario = document.querySelector('input[name="duvida2"]:checked').value;

        fetch("/formulario/enviarAlbum", {
            method: "POST",
            headers: {
                "Content-Type": "application/json",
            },
            body: JSON.stringify({
                albumServer: albumUsuario
            }),
        })
            .then(function (resposta) {
                console.log("resposta: ", resposta);

            })
            .catch(function (resposta) {
                console.log(`#ERRO: ${resposta}`);
            });

    }
</script>